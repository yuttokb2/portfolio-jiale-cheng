---
import '../styles/global.css';

interface Props {
	title: string;
}

const {title} = Astro.props;
---

<!doctype html>

<html lang = "en" class = "scroll-smooth">
	<head>
		<meta charset = "utf-8" />
		<meta name = "description" content = "Portfolio of Jiale Cheng - Senior Data Scientist" />
		<meta name = "viewport" content = "width=device-width" />
		<title>{title}</title>
	<style is:global>
		/* Estado inicial: Invisible y desplazado hacia abajo */
		.fade-up {
			opacity: 0;
			transform: translateY(30px);
			transition: opacity 0.8s ease-out, transform 0.8s ease-out;
		}

		/* Estado final: Visible y en su sitio (se activa con JS) */
		.fade-up.in-view {
			opacity: 1;
			transform: translateY(0);
		}
		
		/* Retrasos para escalonar animaciones */
		.delay-100 { transition-delay: 100ms; }
		.delay-200 { transition-delay: 200ms; }
		.delay-300 { transition-delay: 300ms; }
	</style>
	</head>
<body class="bg-[#050505] text-white font-sans overflow-x-hidden selection:bg-cyan-500/30">
    
    <div class="fixed inset-0 z-[-1] pointer-events-none">
        <div class="absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"></div>
        
        <div id="spotlight" class="absolute inset-0 bg-[radial-gradient(600px_circle_at_var(--x,_50%)_var(--y,_50%),rgba(29,78,216,0.15),transparent_40%)]"></div>
        
        <div class="absolute left-0 right-0 top-0 -z-10 m-auto h-[310px] w-[310px] rounded-full bg-cyan-400 opacity-20 blur-[100px]"></div>
        <div class="absolute right-0 top-0 -z-10 h-[200px] w-[200px] rounded-full bg-purple-500 opacity-20 blur-[80px]"></div>
    </div>

    <slot />

    <script>
        const spotlight = document.getElementById('spotlight');
        
        window.addEventListener('mousemove', (e) => {
            if (spotlight) {
                const x = e.clientX;
                const y = e.clientY;
                spotlight.style.setProperty('--x', `${x}px`);
                spotlight.style.setProperty('--y', `${y}px`);
            }
        });
    </script>

    <script>
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.1
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('in-view');
                    observer.unobserve(entry.target); // Solo animar una vez
                }
            });
        }, observerOptions);

        document.addEventListener('DOMContentLoaded', () => {
            const elements = document.querySelectorAll('.fade-up');
            elements.forEach(el => observer.observe(el));
        });
    </script>
</body>
</html>
